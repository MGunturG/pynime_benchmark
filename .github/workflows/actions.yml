name: "Benchmark the API"
on:
	push:
		branches: [main]
	schedule:
		- cron: "0 */1 * * *"
jobs:
	perform_benchmark:
		name: "Benchmark"
		runs-on: windows-latest
		steps:
			- name: Clone repo
			  uses: action/checkout@2

			- name: Install dependencies
			  run: |
			  		pip install --upgrade pip
			  		pip install pillow git+https://github.com/yoshiumikuni/pynime.git 

			- name: run benchmark.py
			  run: |
			  		python "benchmark.py"

			- name: Auto commit
			  uses: stefanzweifel/git-auto-commit-action@v4
			  with:
			  	commit_message: "Maid Bot: Benchmark Update"
			  	file_pattern: "bench_result.png"
			  	repository: .
			  	skip_fetch: false
